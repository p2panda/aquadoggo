[package]
name = "aquadoggo"
version = "0.4.0"
authors = [
    "adz <x1d@adz.garden>",
    "cafca <cafca@001.land>",
    "pietgeursen <pietgeursen@gmail.com>",
    "sandreae <contact@samandreae.com>",
    "sophiiistika <sophiiistika@mailbox.org>",
    "glyph <glyph@mycelial.technology>",
]
description = "Embeddable p2p network node"
license = "AGPL-3.0-or-later"
repository = "https://github.com/p2panda/aquadoggo"
readme = "README.md"
edition = "2018"

[features]
proptests = []
graphql = ["dep:async-graphql", "dep:async-graphql-axum", "dep:axum", "dep:dynamic-graphql", "dep:http", "dep:tower-http"]
network = ["dep:libp2p", "dep:libp2p-quic"]

[dependencies]
anyhow = "1.0.62"
async-graphql = { version = "5.0.6", features = [
    "dynamic-schema",
], optional = true }
async-graphql-axum = { version = "5.0.6", optional = true }
async-trait = "0.1.64"
axum = { version = "0.6.10", optional = true }
bamboo-rs-core-ed25519-yasmf = "0.1.1"
bs58 = "0.4.0"
deadqueue = { version = "0.2.3", default-features = false, features = [
    "unlimited",
] }
directories = "4.0.1"
dynamic-graphql = { version = "0.7.3", optional = true }
envy = "0.4.2"
futures = "0.3.23"
hex = "0.4.3"
http = { version = "0.2.9", optional = true }
libp2p = { version = "0.51.3", features = [
    "autonat",
    "identify",
    "macros",
    "mdns",
    "noise",
    "ping",
    "relay",
    "rendezvous",
    "serde",
    "tokio",
    "yamux",
], optional = true}
libp2p-quic = { version = "0.7.0-alpha.3", features = ["tokio"], optional = true}
lipmaa-link = "0.2.2"
log = "0.4.17"
once_cell = "1.17.0"
openssl-probe = "0.1.5"
p2panda-rs = { git = "https://github.com/p2panda/p2panda", rev = "50f9f0b02570c8ed895baf499cb0d98bbadd1687", features = [
    "storage-provider",
] }
serde = { version = "1.0.152", features = ["derive"] }
sqlx = { version = "0.6.1", features = [
    "any",
    "postgres",
    "sqlite",
    "runtime-tokio-rustls",
] }
thiserror = "1.0.39"
tokio = { version = "1.25.0", features = [
    "macros",
    "net",
    "rt",
    "rt-multi-thread",
    "sync",
    "time",
] }
tower-http = { version = "0.3.4", default-features = false, features = [
    "cors",
], optional = true}
triggered = "0.1.2"

[dev-dependencies]
async-recursion = "1.0.4"
ciborium = "0.2.0"
ctor = "0.1.23"
env_logger = "0.9.0"
http = "0.2.9"
hyper = "0.14.19"
once_cell = "1.17.0"
p2panda-rs = { git = "https://github.com/p2panda/p2panda", rev = "50f9f0b02570c8ed895baf499cb0d98bbadd1687", features = [
    "test-utils",
    "storage-provider",
] }
proptest = "1.1.0"
proptest-derive = "0.3.0"
rand = "0.8.5"
reqwest = { version = "0.11.11", default-features = false, features = [
    "json",
    "stream",
] }
rstest = "0.15.0"
rstest_reuse = "0.3.0"
serde_json = "1.0.85"
tempfile = "3.4.0"
tower = "0.4.13"
tower-service = "0.3.2"
